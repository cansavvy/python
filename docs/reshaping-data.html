<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Reshaping Data | DataTrail - Python</title>
  <meta name="description" content="Description about Course/Book." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Reshaping Data | DataTrail - Python" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description about Course/Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Reshaping Data | DataTrail - Python" />
  
  <meta name="twitter:description" content="Description about Course/Book." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/DataTrail_favicon.ico" type="image/x-icon" />
<link rel="prev" href="cleaning-data.html"/>
<link rel="next" href="how-to-tidy-data.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style_DataTrail.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="https://www.datatrail.org/"><img src="assets/DataTrail_logo.jpg" style="padding-left: 0px; padding-top: 8px;"</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a></li>
<li class="chapter" data-level="1" data-path="demo-chapter.html"><a href="demo-chapter.html"><i class="fa fa-check"></i><b>1</b> Demo Chapter</a>
<ul>
<li class="chapter" data-level="1.1" data-path="demo-chapter.html"><a href="demo-chapter.html#how-to-use-the-setup"><i class="fa fa-check"></i><b>1.1</b> How to Use the Setup</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="demo-chapter.html"><a href="demo-chapter.html#the-bare-bones-approach"><i class="fa fa-check"></i><b>1.1.1</b> The Bare-Bones Approach</a></li>
<li class="chapter" data-level="1.1.2" data-path="demo-chapter.html"><a href="demo-chapter.html#the-interactive-approach"><i class="fa fa-check"></i><b>1.1.2</b> The Interactive Approach</a></li>
<li class="chapter" data-level="1.1.3" data-path="demo-chapter.html"><a href="demo-chapter.html#adding-google-slide-images"><i class="fa fa-check"></i><b>1.1.3</b> Adding Google Slide Images</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>2.1</b> Motivation</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#target-audience"><i class="fa fa-check"></i><b>2.2</b> Target Audience</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#curriculum"><i class="fa fa-check"></i><b>2.3</b> Curriculum</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="set-up.html"><a href="set-up.html"><i class="fa fa-check"></i><b>3</b> Set up</a>
<ul>
<li class="chapter" data-level="3.1" data-path="set-up.html"><a href="set-up.html#learning-objectives"><i class="fa fa-check"></i><b>3.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="intro-to-python.html"><a href="intro-to-python.html"><i class="fa fa-check"></i><b>4</b> Intro to Python</a>
<ul>
<li class="chapter" data-level="4.1" data-path="intro-to-python.html"><a href="intro-to-python.html#learning-objectives-1"><i class="fa fa-check"></i><b>4.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="getting-data.html"><a href="getting-data.html"><i class="fa fa-check"></i><b>5</b> Getting Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="getting-data.html"><a href="getting-data.html#learning-objectives-2"><i class="fa fa-check"></i><b>5.1</b> Learning Objectives</a></li>
</ul></li>
<li class="part"><span><b>Cleaning Data</b></span></li>
<li class="chapter" data-level="6" data-path="cleaning-data.html"><a href="cleaning-data.html"><i class="fa fa-check"></i><b>6</b> Cleaning Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="cleaning-data.html"><a href="cleaning-data.html#learning-objectives-3"><i class="fa fa-check"></i><b>6.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="reshaping-data.html"><a href="reshaping-data.html"><i class="fa fa-check"></i><b>7</b> Reshaping Data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="reshaping-data.html"><a href="reshaping-data.html#data-formats"><i class="fa fa-check"></i><b>7.1</b> Data Formats</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="reshaping-data.html"><a href="reshaping-data.html#wide-data"><i class="fa fa-check"></i><b>7.1.1</b> Wide Data</a></li>
<li class="chapter" data-level="7.1.2" data-path="reshaping-data.html"><a href="reshaping-data.html#long-data"><i class="fa fa-check"></i><b>7.1.2</b> Long Data</a></li>
<li class="chapter" data-level="7.1.3" data-path="reshaping-data.html"><a href="reshaping-data.html#reshaping-data-1"><i class="fa fa-check"></i><b>7.1.3</b> Reshaping data</a></li>
<li class="chapter" data-level="7.1.4" data-path="reshaping-data.html"><a href="reshaping-data.html#melt"><i class="fa fa-check"></i><b>7.1.4</b> <span><code>melt</code></span></a></li>
<li class="chapter" data-level="7.1.5" data-path="reshaping-data.html"><a href="reshaping-data.html#pivot"><i class="fa fa-check"></i><b>7.1.5</b> <span><code>pivot</code></span></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="reshaping-data.html"><a href="reshaping-data.html#transposing-data"><i class="fa fa-check"></i><b>7.2</b> Transposing data</a></li>
<li class="chapter" data-level="7.3" data-path="reshaping-data.html"><a href="reshaping-data.html#additional-resources"><i class="fa fa-check"></i><b>7.3</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html"><i class="fa fa-check"></i><b>8</b> How to Tidy Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#exploring-data"><i class="fa fa-check"></i><b>8.1</b> Exploring Data</a></li>
<li class="chapter" data-level="8.2" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#filtering-data"><i class="fa fa-check"></i><b>8.2</b> Filtering Data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#filtering-rows"><i class="fa fa-check"></i><b>8.2.1</b> Filtering Rows</a></li>
<li class="chapter" data-level="8.2.2" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#selecting-columns"><i class="fa fa-check"></i><b>8.2.2</b> Selecting Columns</a></li>
<li class="chapter" data-level="8.2.3" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#renaming-columns"><i class="fa fa-check"></i><b>8.2.3</b> Renaming Columns</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#reordering"><i class="fa fa-check"></i><b>8.3</b> Reordering</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#reordering-columns"><i class="fa fa-check"></i><b>8.3.1</b> Reordering Columns</a></li>
<li class="chapter" data-level="8.3.2" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#reordering-rows"><i class="fa fa-check"></i><b>8.3.2</b> Reordering Rows</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#creating-new-columns"><i class="fa fa-check"></i><b>8.4</b> Creating new columns</a></li>
<li class="chapter" data-level="8.5" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#separating-columns"><i class="fa fa-check"></i><b>8.5</b> Separating Columns</a></li>
<li class="chapter" data-level="8.6" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#merging-columns"><i class="fa fa-check"></i><b>8.6</b> Merging Columns</a></li>
<li class="chapter" data-level="8.7" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#combining-data-across-data-frames"><i class="fa fa-check"></i><b>8.7</b> Combining data across data frames</a></li>
<li class="chapter" data-level="8.8" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#summarizing-data"><i class="fa fa-check"></i><b>8.8</b> Summarizing Data</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#describe"><i class="fa fa-check"></i><b>8.8.1</b> <span><code>describe</code></span></a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#grouping-data"><i class="fa fa-check"></i><b>8.9</b> Grouping Data</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#groupby"><i class="fa fa-check"></i><b>8.9.1</b> <span><code>groupby</code></span></a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="how-to-tidy-data.html"><a href="how-to-tidy-data.html#conclusion"><i class="fa fa-check"></i><b>8.10</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="plotting-data.html"><a href="plotting-data.html"><i class="fa fa-check"></i><b>9</b> Plotting Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="plotting-data.html"><a href="plotting-data.html#learning-objectives-4"><i class="fa fa-check"></i><b>9.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="getting-stats.html"><a href="getting-stats.html"><i class="fa fa-check"></i><b>10</b> Getting Stats</a>
<ul>
<li class="chapter" data-level="10.1" data-path="getting-stats.html"><a href="getting-stats.html#learning-objectives-5"><i class="fa fa-check"></i><b>10.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="scripting-in-python.html"><a href="scripting-in-python.html"><i class="fa fa-check"></i><b>11</b> Scripting in Python</a>
<ul>
<li class="chapter" data-level="11.1" data-path="scripting-in-python.html"><a href="scripting-in-python.html#learning-objectives-6"><i class="fa fa-check"></i><b>11.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="getting-the-most-out-of-python.html"><a href="getting-the-most-out-of-python.html"><i class="fa fa-check"></i><b>12</b> Getting the most out of Python</a>
<ul>
<li class="chapter" data-level="12.1" data-path="getting-the-most-out-of-python.html"><a href="getting-the-most-out-of-python.html#learning-objectives-7"><i class="fa fa-check"></i><b>12.1</b> Learning Objectives</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="13" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>13</b> References</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by: </a> </p>
<p style="text-align:center;"> <a href="http://jhudatascience.org/"> The Johns Hopkins Data Science Lab </a></p>
<a href="http://jhudatascience.org/"><img src="https://jhudatascience.org/images/dasl.png" style=" width: 80%; filter: grayscale(100%); padding-left: 40px; padding-top: 8px; vertical-align: top "</a>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
<p style="padding-left: 40px;"><div class="trapezoid" style = "padding-left: 40px;"><span>  <a href="https://forms.gle/VWaJYc3zATe3qxYC9"> Click here to provide feedback</a> <img src="assets/itcr_arrow.png" style=" width: 10%" ></span></div></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">DataTrail - Python</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style_DataTrail.css" rel="stylesheet">
</head>
        


<div class="hero-image-container"> 
  <img class= "hero-image" src="assets/DataTrail.jpg">
</div>
<div id="reshaping-data" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Reshaping Data</h1>
<div id="data-formats" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Data Formats</h2>
<p>Tidy data generally exist in two forms: wide data and long data. Both types of data are used and needed in data analysis. Fortunately, there are tools that can take you from wide-to-long and from long-to-wide. This makes it easy to work with any tidy data set. We’ll discuss the basics of what wide and long data are and how to go back and forth between the two in Python. Getting data into the right format will be crucial later when summarizing data and visualizing it. To help you visualize data as its being reshaped, we recommend you play around with the <a href="https://pandastutor.com/">PandasTidyDataTutor</a>.</p>
<div id="wide-data" class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Wide Data</h3>
<p>Wide data has a column for each variable and a row for each observation. Data are often entered and stored in this manner. This is because wide data are often easy to understand at a glance. For example, this is a wide data set.</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th>LastName</th>
<th>FirstName</th>
<th align="right">HeightInches</th>
<th align="right">WeightLbs</th>
<th align="right">Insulin</th>
<th align="right">Glucose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1004</td>
<td>Smith</td>
<td>Jane</td>
<td align="right">65</td>
<td align="right">180</td>
<td align="right">0.60</td>
<td align="right">163</td>
</tr>
<tr class="even">
<td align="right">4587</td>
<td>Nayef</td>
<td>Mohammed</td>
<td align="right">75</td>
<td align="right">215</td>
<td align="right">1.46</td>
<td align="right">150</td>
</tr>
<tr class="odd">
<td align="right">1727</td>
<td>Doe</td>
<td>Janice</td>
<td align="right">62</td>
<td align="right">124</td>
<td align="right">0.72</td>
<td align="right">177</td>
</tr>
<tr class="even">
<td align="right">6879</td>
<td>Jordan</td>
<td>Alex</td>
<td align="right">77</td>
<td align="right">160</td>
<td align="right">1.23</td>
<td align="right">205</td>
</tr>
</tbody>
</table>
<p>This is a dataset we’ve looked at in a previous lesson. As discussed previously, it’s a rectangular and tidy dataset. Now, we can also state that it is a wide dataset. Here you can clearly see what measurements were taken for each individual and can get a sense of how many individuals are contained in the dataset.</p>
<p>Specifically, each individual is in a different row with each variable in a different column. At a glance we can quickly see that we have information about four different people and that each person was measured in four different ways.</p>
</div>
<div id="long-data" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Long Data</h3>
<p>Long data, on the other hand, has one column indicating the type of variable contained in that row and then a separate row for the value for that variable. Each row contains a single observation for a single variable. Below is an example of a long data set.</p>
<table>
<thead>
<tr class="header">
<th align="right">ID</th>
<th>Variable</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1004</td>
<td>LastName</td>
<td>Smith</td>
</tr>
<tr class="even">
<td align="right">1004</td>
<td>FirstName</td>
<td>Jane</td>
</tr>
<tr class="odd">
<td align="right">1004</td>
<td>HeightInches</td>
<td>65</td>
</tr>
<tr class="even">
<td align="right">1004</td>
<td>WeightLbs</td>
<td>180</td>
</tr>
<tr class="odd">
<td align="right">1004</td>
<td>Insulin</td>
<td>0.60</td>
</tr>
<tr class="even">
<td align="right">1004</td>
<td>Glucose</td>
<td>163</td>
</tr>
<tr class="odd">
<td align="right">4587</td>
<td>LastName</td>
<td>Nayef</td>
</tr>
<tr class="even">
<td align="right">4587</td>
<td>FirstName</td>
<td>Mohammed</td>
</tr>
<tr class="odd">
<td align="right">4587</td>
<td>HeightInches</td>
<td>75</td>
</tr>
<tr class="even">
<td align="right">4587</td>
<td>WeightLbs</td>
<td>215</td>
</tr>
<tr class="odd">
<td align="right">4587</td>
<td>Insulin</td>
<td>1.46</td>
</tr>
<tr class="even">
<td align="right">4587</td>
<td>Glucose</td>
<td>150</td>
</tr>
<tr class="odd">
<td align="right">1727</td>
<td>LastName</td>
<td>Doe</td>
</tr>
<tr class="even">
<td align="right">1727</td>
<td>FirstName</td>
<td>Janice</td>
</tr>
<tr class="odd">
<td align="right">1727</td>
<td>HeightInches</td>
<td>62</td>
</tr>
<tr class="even">
<td align="right">1727</td>
<td>WeightLbs</td>
<td>124</td>
</tr>
<tr class="odd">
<td align="right">1727</td>
<td>Insulin</td>
<td>0.72</td>
</tr>
<tr class="even">
<td align="right">1727</td>
<td>Glucose</td>
<td>177</td>
</tr>
<tr class="odd">
<td align="right">6879</td>
<td>LastName</td>
<td>Jordan</td>
</tr>
<tr class="even">
<td align="right">6879</td>
<td>FirstName</td>
<td>Alex</td>
</tr>
<tr class="odd">
<td align="right">6879</td>
<td>HeightInches</td>
<td>77</td>
</tr>
<tr class="even">
<td align="right">6879</td>
<td>WeightLbs</td>
<td>160</td>
</tr>
<tr class="odd">
<td align="right">6879</td>
<td>Insulin</td>
<td>1.23</td>
</tr>
<tr class="even">
<td align="right">6879</td>
<td>Glucose</td>
<td>205</td>
</tr>
</tbody>
</table>
<p>This long dataset includes the exact same information as the previous wide dataset; it is just stored differently. It’s harder to see visually how many different measurements were taken and on how many different people, but the same information is there.</p>
<p>While long data formats are less readable than wide data at a glance, they are a lot easier to work with during analysis. Most of the tools we’ll be working with use long data. Thus, to go from how data are often stored (wide) to working with the data during analysis (long), we’ll need to understand what tools are needed to do this and how to work with them.</p>
</div>
<div id="reshaping-data-1" class="section level3" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Reshaping data</h3>
<p>Converting your data from wide-to-long or from long-to-wide data formats is referred to as <strong>reshaping</strong> your data. You can do this with the <a href="https://pandas.pydata.org"><code>pandas</code></a> package. In fact, we will use the pandas package for all of our data tidying, wrangling, and reshaping. As with most helpful Python packages, there is more functionality than what is discussed here, so feel free to explore the additional resources at the bottom to learn even more.</p>
<p>For these examples, we’ll work with the <a href="https://tidyr.tidyverse.org/reference/billboard.html"><code>billboard</code></a> dataset available in <code>tidyr</code>. The data in this dataset includes the song rankings for Billboard top 100 in the year 2000. The following code downloads the data from GitHub and displays the first few rows using the <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.head.html"><code>head</code></a> method of the dataframe.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="reshaping-data.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="reshaping-data.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="reshaping-data.html#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="reshaping-data.html#cb3-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&quot;https://raw.githubusercontent.com/tidyverse/tidyr/main/data-raw/billboard.csv&quot;</span></span>
<span id="cb3-5"><a href="reshaping-data.html#cb3-5" aria-hidden="true" tabindex="-1"></a>billboard <span class="op">=</span> pd.read_csv(url)</span>
<span id="cb3-6"><a href="reshaping-data.html#cb3-6" aria-hidden="true" tabindex="-1"></a>billboard.head()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">artist</th>
<th align="left">track</th>
<th align="left">time</th>
<th align="left">date.entered</th>
<th align="right">wk1</th>
<th align="right">wk2</th>
<th align="right">…</th>
<th align="right">wk75</th>
<th align="right">wk76</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep…</td>
<td align="left">4:22</td>
<td align="left">2000-02-26</td>
<td align="right">87</td>
<td align="right">82</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">2Ge+her</td>
<td align="left">The Hardest Part Of …</td>
<td align="left">3:15</td>
<td align="left">2000-09-02</td>
<td align="right">91</td>
<td align="right">87</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">3 Doors Down</td>
<td align="left">Kryptonite</td>
<td align="left">3:53</td>
<td align="left">2000-04-08</td>
<td align="right">81</td>
<td align="right">70</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">3 Doors Down</td>
<td align="left">Loser</td>
<td align="left">4:24</td>
<td align="left">2000-10-21</td>
<td align="right">76</td>
<td align="right">76</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">504 Boyz</td>
<td align="left">Wobble Wobble</td>
<td align="left">3:35</td>
<td align="left">2000-04-15</td>
<td align="right">57</td>
<td align="right">34</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
</tbody>
</table>
<p>Again, wide data are easy to decipher at a glance. We can see that we have different weeks for each song, but many of those columns contain the same variable (chart rank) so these data are not tidy.</p>
<p>There are two methods to help you reshape your data.</p>
<ul>
<li><a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.melt.html"><code>melt</code></a> to go from wide data to long data.</li>
<li><a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.pivot.html"><code>pivot</code></a> to go from long data to wide data.</li>
</ul>
</div>
<div id="melt" class="section level3" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.melt.html"><code>melt</code></a></h3>
<p>As data are often stored in wide formats, you’ll likely use <code>melt</code> a lot more frequently than you’ll use <code>pivot</code>. This will allow you to get the data into a long format that will be easy to use for analysis. Here is an example for the <code>billboard</code> data.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="reshaping-data.html#cb4-1" aria-hidden="true" tabindex="-1"></a>long_df <span class="op">=</span> billboard.melt(</span>
<span id="cb4-2"><a href="reshaping-data.html#cb4-2" aria-hidden="true" tabindex="-1"></a>    id_vars<span class="op">=</span>[<span class="st">&quot;year&quot;</span>, <span class="st">&quot;artist&quot;</span>, <span class="st">&quot;track&quot;</span>, <span class="st">&quot;time&quot;</span>, <span class="st">&quot;date.entered&quot;</span>],</span>
<span id="cb4-3"><a href="reshaping-data.html#cb4-3" aria-hidden="true" tabindex="-1"></a>    var_name<span class="op">=</span><span class="st">&quot;week&quot;</span>,</span>
<span id="cb4-4"><a href="reshaping-data.html#cb4-4" aria-hidden="true" tabindex="-1"></a>    value_name<span class="op">=</span><span class="st">&quot;rank&quot;</span>,</span>
<span id="cb4-5"><a href="reshaping-data.html#cb4-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-6"><a href="reshaping-data.html#cb4-6" aria-hidden="true" tabindex="-1"></a>long_df.head()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">artist</th>
<th align="left">track</th>
<th align="left">time</th>
<th align="left">date.entered</th>
<th align="left">week</th>
<th align="right">rank</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep…</td>
<td align="left">4:22</td>
<td align="left">2000-02-26</td>
<td align="left">wk1</td>
<td align="right">87</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">2Ge+her</td>
<td align="left">The Hardest Part Of …</td>
<td align="left">3:15</td>
<td align="left">2000-09-02</td>
<td align="left">wk1</td>
<td align="right">91</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">3 Doors Down</td>
<td align="left">Kryptonite</td>
<td align="left">3:53</td>
<td align="left">2000-04-08</td>
<td align="left">wk1</td>
<td align="right">81</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">3 Doors Down</td>
<td align="left">Loser</td>
<td align="left">4:24</td>
<td align="left">2000-10-21</td>
<td align="left">wk1</td>
<td align="right">76</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">504 Boyz</td>
<td align="left">Wobble Wobble</td>
<td align="left">3:35</td>
<td align="left">2000-04-15</td>
<td align="left">wk1</td>
<td align="right">57</td>
</tr>
</tbody>
</table>
<p>We set the argument <code>id_var</code> to <code>["year", "artist", "track", "time", "date.entered"]</code> which tells pandas that all these variables identify each observation and should not be included in the transformation from wide to long.</p>
</div>
<div id="pivot" class="section level3" number="7.1.5">
<h3><span class="header-section-number">7.1.5</span> <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.pivot.html"><code>pivot</code></a></h3>
<p>To return your long data back to its original form, you can use <code>pivot</code>. Here you specify two columns: the column that contains the names of what your wide data columns should be (<code>columns</code>) and the column that contains the identifier for each observation (<code>index</code>). The data frame resulting from <code>pivot</code> will have the original information back in the wide format. However, the columns may be in a different order, and the identifiers (e.g., the track name) will appear in the index of the data frame. We’ll discuss indices and how to rearrange data in a coming lesson.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="reshaping-data.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use pivot to reshape from long to wide.</span></span>
<span id="cb5-2"><a href="reshaping-data.html#cb5-2" aria-hidden="true" tabindex="-1"></a>wide_df <span class="op">=</span> long_df.pivot(</span>
<span id="cb5-3"><a href="reshaping-data.html#cb5-3" aria-hidden="true" tabindex="-1"></a>    index<span class="op">=</span>[<span class="st">&quot;year&quot;</span>, <span class="st">&quot;artist&quot;</span>, <span class="st">&quot;track&quot;</span>, <span class="st">&quot;time&quot;</span>, <span class="st">&quot;date.entered&quot;</span>],</span>
<span id="cb5-4"><a href="reshaping-data.html#cb5-4" aria-hidden="true" tabindex="-1"></a>    columns<span class="op">=</span><span class="st">&quot;week&quot;</span>,</span>
<span id="cb5-5"><a href="reshaping-data.html#cb5-5" aria-hidden="true" tabindex="-1"></a>    values<span class="op">=</span><span class="st">&quot;rank&quot;</span>,</span>
<span id="cb5-6"><a href="reshaping-data.html#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="reshaping-data.html#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at the wide data.</span></span>
<span id="cb5-8"><a href="reshaping-data.html#cb5-8" aria-hidden="true" tabindex="-1"></a>wide_df.head()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="right">year</th>
<th align="left">artist</th>
<th align="left">track</th>
<th align="left">time</th>
<th align="left">date.entered</th>
<th align="right">wk1</th>
<th align="right">wk2</th>
<th align="right">…</th>
<th align="right">wk75</th>
<th align="right">wk76</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">2000</td>
<td align="left">2 Pac</td>
<td align="left">Baby Don’t Cry (Keep…</td>
<td align="left">4:22</td>
<td align="left">2000-02-26</td>
<td align="right">87</td>
<td align="right">82</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">2Ge+her</td>
<td align="left">The Hardest Part Of …</td>
<td align="left">3:15</td>
<td align="left">2000-09-02</td>
<td align="right">91</td>
<td align="right">87</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">3 Doors Down</td>
<td align="left">Kryptonite</td>
<td align="left">3:53</td>
<td align="left">2000-04-08</td>
<td align="right">81</td>
<td align="right">70</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="even">
<td align="right">2000</td>
<td align="left">3 Doors Down</td>
<td align="left">Loser</td>
<td align="left">4:24</td>
<td align="left">2000-10-21</td>
<td align="right">76</td>
<td align="right">76</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
<tr class="odd">
<td align="right">2000</td>
<td align="left">504 Boyz</td>
<td align="left">Wobble Wobble</td>
<td align="left">3:35</td>
<td align="left">2000-04-15</td>
<td align="right">57</td>
<td align="right">34</td>
<td align="right">…</td>
<td align="right">nan</td>
<td align="right">nan</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="transposing-data" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Transposing data</h2>
<p>You may find you need your rows to be columns and your columns to be rows. In other words, you need to transpose your data frame. You can do this by using the <a href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.T.html"><code>.T</code></a> property of the dataframe or the <a href="https://pandas.pydata.org/docs/reference/api/pandas.transpose.html"><code>transpose</code></a> method. Let’s have a look at our <code>billboard</code> dataset again.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="reshaping-data.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use .T to transpose the data (swap rows and columns).</span></span>
<span id="cb6-2"><a href="reshaping-data.html#cb6-2" aria-hidden="true" tabindex="-1"></a>transposed <span class="op">=</span> billboard.T</span>
<span id="cb6-3"><a href="reshaping-data.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Take a look at the transposed data.</span></span>
<span id="cb6-4"><a href="reshaping-data.html#cb6-4" aria-hidden="true" tabindex="-1"></a>transposed.head()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">0</th>
<th align="left">1</th>
<th align="left">2</th>
<th align="left">…</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">year</td>
<td align="left">2000</td>
<td align="left">2000</td>
<td align="left">2000</td>
<td align="left">…</td>
</tr>
<tr class="even">
<td align="left">artist</td>
<td align="left">2 Pac</td>
<td align="left">2Ge+her</td>
<td align="left">3 Doors Down</td>
<td align="left">…</td>
</tr>
<tr class="odd">
<td align="left">track</td>
<td align="left">Baby Don’t Cry (Keep…</td>
<td align="left">The Hardest Part Of …</td>
<td align="left">Kryptonite</td>
<td align="left">…</td>
</tr>
<tr class="even">
<td align="left">time</td>
<td align="left">4:22</td>
<td align="left">3:15</td>
<td align="left">3:53</td>
<td align="left">…</td>
</tr>
<tr class="odd">
<td align="left">date.entered</td>
<td align="left">2000-02-26</td>
<td align="left">2000-09-02</td>
<td align="left">2000-04-08</td>
<td align="left">…</td>
</tr>
</tbody>
</table>
<p>While <code>billboard</code> data had 317 rows and 81 columns, <code>transposed</code> has 81 rows and 317 columns. The information in both <code>billboard</code> and <code>transposed</code> is the same, it’s just in a different shape.</p>
</div>
<div id="additional-resources" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Additional Resources</h2>
<ul>
<li><a href="https://pandastutor.com/">PandasTidyDataTutor</a></li>
<li><a href="https://pandas.pydata.org">pandas</a>, a library for analyzing, wrangling, and tidying data in Python.</li>
<li><a href="https://pandas.pydata.org/docs/user_guide/10min.html">pandas tutorial</a>.</li>
<li><a href="https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf">pandas cheatsheet</a>.</li>
</ul>

</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="cleaning-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="how-to-tidy-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
